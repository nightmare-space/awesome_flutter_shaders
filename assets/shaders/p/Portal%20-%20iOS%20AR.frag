{
  "sksl": {
    "entrypoint": "PortaliOSAR_fragment_main",
    "shader": "// This SkSL shader is autogenerated by spirv-cross.\n\nfloat4 flutter_FragCoord;\n\nuniform vec2 iResolution;\nuniform float iTime;\nuniform float iFrame;\nuniform vec4 iMouse;\nuniform vec4 iChannelWrap;\nuniform vec4 iChannelFilter;\nuniform vec2 iChannelResolution0;\nuniform vec2 iChannelResolution1;\nuniform vec2 iChannelResolution2;\nuniform vec2 iChannelResolution3;\nuniform shader iChannel2;\nuniform half2 iChannel2_size;\nuniform shader iChannel3;\nuniform half2 iChannel3_size;\n\nvec4 fragColor;\n\nvec2 FLT_flutter_local_FlutterFragCoord()\n{\n    return flutter_FragCoord.xy;\n}\n\nmat3 FLT_flutter_local_setCamera(vec3 ro, vec3 ta, float cr)\n{\n    vec3 cw = normalize(ta - ro);\n    vec3 cp = vec3(sin(cr), cos(cr), 0.0);\n    vec3 cu = normalize(cross(cw, cp));\n    vec3 cv = normalize(cross(cu, cw));\n    return mat3(vec3(cu), vec3(cv), vec3(cw));\n}\n\nfloat FLT_flutter_local_iPlane(vec3 ro, vec3 rd, vec4 pla)\n{\n    float denom = dot(pla.xyz, rd);\n    if (abs(denom) < 9.9999999747524270787835121154785e-07)\n    {\n        return -1.0;\n    }\n    return ((-pla.w) - dot(pla.xyz, ro)) / denom;\n}\n\nfloat FLT_flutter_local_hash12(inout vec2 p)\n{\n    p = fract(p * 0.31830990314483642578125) * 50.0;\n    return fract((p.x * p.y) * (p.x + p.y));\n}\n\nfloat FLT_flutter_local_noise(vec2 x)\n{\n    vec2 f = fract(x);\n    vec2 u = (f * f) * (vec2(3.0) - (f * 2.0));\n    vec2 p = floor(x);\n    vec2 param = p + vec2(0.0);\n    float _537 = FLT_flutter_local_hash12(param);\n    float a = _537;\n    vec2 param_1 = p + vec2(1.0, 0.0);\n    float _543 = FLT_flutter_local_hash12(param_1);\n    float b = _543;\n    vec2 param_2 = p + vec2(0.0, 1.0);\n    float _549 = FLT_flutter_local_hash12(param_2);\n    float c = _549;\n    vec2 param_3 = p + vec2(1.0);\n    float _555 = FLT_flutter_local_hash12(param_3);\n    float d = _555;\n    return ((a + ((b - a) * u.x)) + ((c - a) * u.y)) + (((((a - b) - c) + d) * u.x) * u.y);\n}\n\nfloat FLT_flutter_local_fbm(inout vec2 p, int OCTAVES)\n{\n    float a = 0.0;\n    float b = 0.5;\n    for (int i = 0; i < OCTAVES; i++)\n    {\n        vec2 param = p;\n        a += (FLT_flutter_local_noise(param) * b);\n        b *= 0.5;\n        p = mat2(vec2(1.60000002384185791015625, -1.2000000476837158203125), vec2(1.2000000476837158203125, 1.60000002384185791015625)) * p;\n    }\n    return a;\n}\n\nfloat FLT_flutter_local_map(inout vec3 p)\n{\n    vec3 _646 = p;\n    vec2 _649 = _646.xz + vec2(1.0499999523162841796875);\n    p.x = _649.x;\n    p.z = _649.y;\n    float d = p.y;\n    vec2 pm = mod(p.xz + vec2(1.0499999523162841796875), vec2(2.099999904632568359375)) - vec2(1.0499999523162841796875);\n    d = min(d, max(abs(pm.x) - 0.1500000059604644775390625, abs(pm.y) - 0.1500000059604644775390625));\n    vec2 cm = mod(p.xz, vec2(2.099999904632568359375)) - vec2(1.0499999523162841796875);\n    d = min(d, 2.5 - p.y);\n    d = max(d, 0.89999997615814208984375 - length(vec2(p.y - 2.5, min(abs(cm.x), abs(cm.y)))));\n    return d;\n}\n\nvec3 FLT_flutter_local_calcNormal(vec3 pos)\n{\n    vec2 e = vec2(9.9999997473787516355514526367188e-05, -9.9999997473787516355514526367188e-05);\n    vec3 param = pos + e.xyy;\n    float _768 = FLT_flutter_local_map(param);\n    vec3 param_1 = pos + e.yyx;\n    float _777 = FLT_flutter_local_map(param_1);\n    vec3 param_2 = pos + e.yxy;\n    float _787 = FLT_flutter_local_map(param_2);\n    vec3 param_3 = pos + e.xxx;\n    float _797 = FLT_flutter_local_map(param_3);\n    return normalize((((e.xyy * _768) + (e.yyx * _777)) + (e.yxy * _787)) + (e.xxx * _797));\n}\n\nvec4 FLT_flutter_local_tex3D(shader sam, inout vec3 p, vec3 n)\n{\n    vec3 _714 = p;\n    vec2 _718 = (mat2(vec2(0.800000011920928955078125, -0.60000002384185791015625), vec2(0.60000002384185791015625, 0.800000011920928955078125)) * _714.xz) + vec2(0.5);\n    p.x = _718.x;\n    p.z = _718.y;\n    vec4 x = sam.eval(sam_size * ( p.yz));\n    vec4 y = sam.eval(sam_size * ( p.zx));\n    vec4 z = sam.eval(sam_size * ( p.xy));\n    return ((x * abs(n.x)) + (y * abs(n.y))) + (z * abs(n.z));\n}\n\nvec3 FLT_flutter_local_getVerts(int index)\n{\n    if (index == 0)\n    {\n        return vec3(0.5, 0.1500000059604644775390625, 0.0199999995529651641845703125);\n    }\n    if (index == 1)\n    {\n        return vec3(-0.4000000059604644775390625, 0.1500000059604644775390625, 0.0199999995529651641845703125);\n    }\n    if (index == 2)\n    {\n        return vec3(-0.4000000059604644775390625, 1.64999997615814208984375, 0.0199999995529651641845703125);\n    }\n    if (index == 3)\n    {\n        return vec3(0.5, 1.64999997615814208984375, 0.0199999995529651641845703125);\n    }\n    return vec3(0.0);\n}\n\nvoid FLT_flutter_local_seg_plane_intersection(vec3 v0, vec3 v1, vec3 n, out vec3 q)\n{\n    vec3 vd = v1 - v0;\n    float d = dot(vd, n);\n    if (abs(d) < 9.9999999747524270787835121154785e-07)\n    {\n        q = v0;\n        return;\n    }\n    float t = (-dot(v0, n)) / d;\n    q = v0 + (vd * t);\n}\n\nfloat FLT_flutter_local_cosine_sine_power_integral_sum(float theta, float cos_theta, float sin_theta, int n, float a, float b)\n{\n    float f = (a * a) + (b * b);\n    float g = (a * cos_theta) + (b * sin_theta);\n    float gsq = g * g;\n    float asq = a * a;\n    float h = (a * sin_theta) - (b * cos_theta);\n    float T = theta;\n    float Tsum = 0.0;\n    float l = g * h;\n    float l2 = b * a;\n    int start = 0;\n    Tsum = T;\n    for (int i = 2; i <= 29; i += 2)\n    {\n        T = ((l + l2) + ((f * (float(i) - 1.0)) * T)) * (1.0 / float(i));\n        l *= gsq;\n        l2 *= asq;\n        Tsum += T;\n    }\n    return Tsum;\n}\n\nfloat FLT_flutter_local_shd_edge_contribution(vec3 v0, vec3 v1, vec3 n, int e)\n{\n    float f = 0.0;\n    float cos_theta = 0.0;\n    float sin_theta = 0.0;\n    vec3 q = cross(v0, v1);\n    sin_theta = length(q);\n    q = normalize(q);\n    cos_theta = dot(v0, v1);\n    if (e == 1)\n    {\n        f = acos(cos_theta);\n    }\n    else\n    {\n        vec3 w = vec3(0.0);\n        float theta = 0.0;\n        theta = acos(cos_theta);\n        w = cross(q, v0);\n        float param = theta;\n        float param_1 = cos_theta;\n        float param_2 = sin_theta;\n        int param_3 = e - 1;\n        float param_4 = dot(v0, n);\n        float param_5 = dot(w, n);\n        f = FLT_flutter_local_cosine_sine_power_integral_sum(param, param_1, param_2, param_3, param_4, param_5);\n    }\n    return f * dot(q, n);\n}\n\nfloat FLT_flutter_local_shd_polygonal(vec3 p, vec3 n, bool spc)\n{\n    int i1 = 0;\n    int J = 4;\n    float sum = 0.0;\n    vec3 ui0 = vec3(0.0);\n    vec3 ui1 = vec3(0.0);\n    vec3 vi0 = vec3(0.0);\n    vec3 vi1 = vec3(0.0);\n    int belowi0 = 1;\n    int belowi1 = 1;\n    for (int j = 0; j < 4; j++)\n    {\n        int param = j;\n        vec3 u = FLT_flutter_local_getVerts(param) - p;\n        if (dot(u, n) >= 0.0)\n        {\n            ui0 = u;\n            vi0 = normalize(u);\n            belowi0 = 0;\n            J = j;\n            break;\n        }\n    }\n    if (J >= 4)\n    {\n        return 0.0;\n    }\n    i1 = J;\n    vec3 param_5;\n    vec3 param_13;\n    for (int i = 0; i < 4; i++)\n    {\n        i1++;\n        if (i1 >= 4)\n        {\n            i1 = 0;\n        }\n        int param_1 = i1;\n        ui1 = FLT_flutter_local_getVerts(param_1) - p;\n        belowi1 = int(dot(ui1, n) < 0.0);\n        if (belowi1 == 0)\n        {\n            vi1 = normalize(ui1);\n        }\n        if ((belowi0 != 0) && (belowi1 == 0))\n        {\n            vec3 vinter = vec3(0.0);\n            vec3 param_2 = ui0;\n            vec3 param_3 = ui1;\n            vec3 param_4 = n;\n            FLT_flutter_local_seg_plane_intersection(param_2, param_3, param_4, param_5);\n            vinter = param_5;\n            vinter = normalize(vinter + vec3(0.00999999977648258209228515625));\n            vec3 param_6 = vi0;\n            vec3 param_7 = vinter;\n            vec3 param_8 = n;\n            int param_9 = 1;\n            sum += FLT_flutter_local_shd_edge_contribution(param_6, param_7, param_8, param_9);\n            vi0 = vinter;\n        }\n        else\n        {\n            if ((belowi0 == 0) && (belowi1 != 0))\n            {\n                vec3 param_10 = ui0;\n                vec3 param_11 = ui1;\n                vec3 param_12 = n;\n                FLT_flutter_local_seg_plane_intersection(param_10, param_11, param_12, param_13);\n                vi1 = param_13;\n                vi1 = normalize(vi1);\n            }\n        }\n        int K = spc ? 30 : 1;\n        if ((belowi0 == 0) || (belowi1 == 0))\n        {\n            vec3 param_14 = vi0;\n            vec3 param_15 = vi1;\n            vec3 param_16 = n;\n            int param_17 = K;\n            sum += FLT_flutter_local_shd_edge_contribution(param_14, param_15, param_16, param_17);\n        }\n        ui0 = ui1;\n        vi0 = vi1;\n        belowi0 = belowi1;\n    }\n    return abs(sum) / 6.283185482025146484375;\n}\n\nfloat FLT_flutter_local_calcSoftshadow(vec3 ro, vec3 rd, float mint, float tmax)\n{\n    float res = 1.0;\n    float t = mint;\n    float ph = 10000000000.0;\n    for (int i = 0; i < 24; i++)\n    {\n        vec3 param = ro + (rd * t);\n        float _824 = FLT_flutter_local_map(param);\n        float h = _824;\n        float y = (h * h) / (2.0 * ph);\n        float d = sqrt(max(0.0, (h * h) - (y * y)));\n        res = min(res, (8.0 * d) / max(0.00999999977648258209228515625, t - y));\n        ph = h;\n        t += min(h, 0.20000000298023223876953125);\n        if ((res < 0.001000000047497451305389404296875) || (t > tmax))\n        {\n            break;\n        }\n    }\n    return clamp(res, 0.0, 1.0);\n}\n\nfloat FLT_flutter_local_calcAO(vec3 pos, vec3 nor)\n{\n    float occ = 0.0;\n    float sca = 1.0;\n    for (int i = 0; i < 5; i++)\n    {\n        float hr = 0.00999999977648258209228515625 + ((0.300000011920928955078125 * float(i)) / 4.0);\n        vec3 aopos = (nor * hr) + pos;\n        vec3 param = aopos;\n        float _902 = FLT_flutter_local_map(param);\n        float dd = _902;\n        occ += ((-(dd - hr)) * sca);\n        sca *= 0.75;\n    }\n    return clamp(1.0 - (3.0 * occ), 0.0, 1.0);\n}\n\nvec3 FLT_flutter_local_render(vec3 ro, vec3 rd, vec2 uv, shader sam, bool inside)\n{\n    float portalAlpha = 0.0;\n    vec3 fogColor = vec3(0.100000001490116119384765625, 0.300000011920928955078125, 0.5) + (rd * 0.100000001490116119384765625);\n    float tmin = 0.00999999977648258209228515625;\n    vec3 portalColor = sam.eval(sam_size * ( uv)).xyz * 1.25;\n    vec3 lightColor = pow(vec3(0.25) + (sam.eval(sam_size * ( vec2(0.5))).xyz * 0.75), vec3(2.2000000476837158203125)) * 3.0;\n    float portalDist = 0.0;\n    vec3 param = ro;\n    vec3 param_1 = rd;\n    vec4 param_2 = vec4(0.0, 0.0, 1.0, -0.0199999995529651641845703125);\n    portalDist = FLT_flutter_local_iPlane(param, param_1, param_2);\n    if (portalDist < 0.0)\n    {\n        portalDist = 500000.0;\n    }\n    else\n    {\n        vec3 p = ro + (rd * portalDist);\n        float time = iTime * 0.1500000059604644775390625;\n        float scale = 6.0;\n        vec2 param_3 = (p.xy * scale) + vec2(time);\n        float _987 = FLT_flutter_local_fbm(param_3, 4);\n        vec2 param_4 = (p.yx * scale) - vec2(time);\n        float _996 = FLT_flutter_local_fbm(param_4, 4);\n        vec2 offset = vec2(_987, _996) - vec2(0.5);\n        vec2 param_5 = (offset * scale) + vec2(time);\n        float _1007 = FLT_flutter_local_fbm(param_5, 4);\n        vec3 _1010 = p;\n        vec2 _1013 = _1010.xy + vec2((_1007 - 0.5) * 0.20000000298023223876953125);\n        p.x = _1013.x;\n        p.y = _1013.y;\n        if (all(lessThan(abs(p.xy - vec2(0.0500000007450580596923828125, 0.89999997615814208984375)), vec2(0.449999988079071044921875, 0.75))))\n        {\n            vec2 bd = abs(p.xy - vec2(0.0500000007450580596923828125, 0.89999997615814208984375)) - vec2(0.300000011920928955078125, 0.60000002384185791015625);\n            bd = max(bd, vec2(0.0)) / vec2(0.1500000059604644775390625);\n            portalAlpha = 1.0 - smoothstep(0.5, 1.0, length(bd));\n        }\n        if (inside)\n        {\n            tmin = portalDist;\n        }\n    }\n    float t = tmin;\n    for (int i = 0; i < 48; i++)\n    {\n        float precis = 0.001000000047497451305389404296875 * t;\n        vec3 param_6 = ro + (rd * t);\n        float _1071 = FLT_flutter_local_map(param_6);\n        float res = _1071;\n        if ((res < precis) || (t > 21.0))\n        {\n            break;\n        }\n        t += res;\n    }\n    float _1088;\n    if (inside)\n    {\n        _1088 = 1.0 - portalAlpha;\n    }\n    else\n    {\n        _1088 = portalAlpha;\n    }\n    portalAlpha = _1088;\n    vec3 col = vec3(0.0);\n    if ((t < 21.0) && (portalAlpha < 1.0))\n    {\n        vec3 p_1 = ro + (rd * t);\n        vec3 param_7 = p_1;\n        vec3 N = FLT_flutter_local_calcNormal(param_7);\n        vec3 R = reflect(rd, N);\n        vec3 param_8 = p_1;\n        vec3 param_9 = N;\n        vec4 _1124 = FLT_flutter_local_tex3D(iChannel2, param_8, param_9);\n        vec3 tex = _1124.xyz;\n        col = tex * clamp(p_1.y + 0.60000002384185791015625, 0.0, 1.0);\n        vec3 param_10 = p_1;\n        vec3 param_11 = N;\n        bool param_12 = false;\n        float diff = FLT_flutter_local_shd_polygonal(param_10, param_11, param_12);\n        vec3 param_13 = p_1;\n        vec3 param_14 = R;\n        bool param_15 = true;\n        float spc = clamp(FLT_flutter_local_shd_polygonal(param_13, param_14, param_15), 0.0, 1.0);\n        float l = (diff * 6.0) + (spc * dot(tex, tex));\n        vec3 ld = p_1 - vec3(0.0500000007450580596923828125, 0.89999997615814208984375, 0.0199999995529651641845703125);\n        vec3 param_16 = p_1;\n        vec3 param_17 = -normalize(ld);\n        float param_18 = 0.0199999995529651641845703125;\n        float param_19 = length(ld) - 0.5;\n        l *= FLT_flutter_local_calcSoftshadow(param_16, param_17, param_18, param_19);\n        vec3 param_20 = p_1;\n        vec3 param_21 = N;\n        l *= (0.5 + (0.5 * FLT_flutter_local_calcAO(param_20, param_21)));\n        col *= (lightColor * l);\n    }\n    if ((!inside) && (t < portalDist))\n    {\n        portalAlpha = 0.0;\n    }\n    float fogAmount = 0.0;\n    if (abs(rd.y) > 9.9999999747524270787835121154785e-07)\n    {\n        fogAmount = clamp(((0.07500000298023223876953125 * exp((-ro.y) * 1.10000002384185791015625)) * (1.0 - exp(((-t) * rd.y) * 1.10000002384185791015625))) / rd.y, 0.0, 4.0);\n    }\n    col = mix(col, fogColor, vec3(fogAmount));\n    col = mix(col, sqrt(clamp(col, vec3(0.0), vec3(1.0))), vec3(0.949999988079071044921875));\n    col = mix(col, portalColor, vec3(portalAlpha));\n    return clamp(col, vec3(0.0), vec3(1.0));\n}\n\nvoid FLT_flutter_local_mainImage(out vec4 fragColor_1, vec2 fragCoord)\n{\n    vec2 p = ((-iResolution) + (fragCoord * 2.0)) / vec2(iResolution.y);\n    float a = 0.300000011920928955078125 * iTime;\n    vec3 ro = vec3(3.900000095367431640625 * sin(a), 0.699999988079071044921875, (3.2000000476837158203125 * cos(a)) + 0.5);\n    vec3 ta = vec3(0.25, 0.60000002384185791015625, 0.5);\n    vec3 param = ro;\n    vec3 param_1 = ta;\n    float param_2 = 0.0;\n    mat3 ca = FLT_flutter_local_setCamera(param, param_1, param_2);\n    vec3 rd = ca * normalize(vec3(p, 2.0));\n    vec3 param_3 = ro;\n    vec3 param_4 = rd;\n    vec2 param_5 = fragCoord / iResolution;\n    bool param_6 = false;\n    vec3 col = FLT_flutter_local_render(param_3, param_4, param_5, iChannel3, param_6);\n    fragColor_1 = vec4(col, 1.0);\n}\n\nvoid FLT_main()\n{\n    float keep = (((((((((((iFrame + iMouse.x) + iTime) + iResolution.x) + iChannelWrap.x) + iChannelResolution0.x) + iChannelResolution0.y) + iChannelResolution1.x) + iChannelResolution1.y) + iChannelResolution2.x) + iChannelResolution2.y) + iChannelResolution3.x) + iChannelResolution3.y;\n    vec2 fragCoord_1 = FLT_flutter_local_FlutterFragCoord();\n    vec2 param_8 = fragCoord_1;\n    vec4 param_7;\n    FLT_flutter_local_mainImage(param_7, param_8);\n    fragColor = param_7;\n    if (keep < (-100000002004087734272.0))\n    {\n        fragColor += vec4(keep);\n    }\n}\n\nhalf4 main(float2 iFragCoord)\n{\n      flutter_FragCoord = float4(iFragCoord, 0, 0);\n      FLT_main();\n      return fragColor;\n}\n",
    "stage": 1,
    "uniforms": [
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 0,
        "name": "iResolution",
        "rows": 2,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 1,
        "name": "iTime",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 2,
        "name": "iFrame",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 3,
        "name": "iMouse",
        "rows": 4,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 4,
        "name": "iChannelWrap",
        "rows": 4,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 5,
        "name": "iChannelFilter",
        "rows": 4,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 6,
        "name": "iChannelResolution0",
        "rows": 2,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 7,
        "name": "iChannelResolution1",
        "rows": 2,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 8,
        "name": "iChannelResolution2",
        "rows": 2,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 9,
        "name": "iChannelResolution3",
        "rows": 2,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 0,
        "columns": 1,
        "location": 10,
        "name": "iChannel2",
        "rows": 1,
        "type": 12
      },
      {
        "array_elements": 0,
        "bit_width": 0,
        "columns": 1,
        "location": 11,
        "name": "iChannel3",
        "rows": 1,
        "type": 12
      }
    ]
  }
}